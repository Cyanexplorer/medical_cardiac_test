<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <!--fontawesome icon pkg-->
    <script src="https://kit.fontawesome.com/a14a7c1ba7.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/dualSlider.css">
    <link rel="stylesheet" type="text/css" href="css/ctViewer.css">
    <link rel="stylesheet" type="text/css" href="css/viewController.css">
    <title>CT Image Slicer</title>
</head>

<body class="vw-100 vh-100">

    <!-- Modal -->
    <div class="modal fade" id="progressModal" tabindex="-1" aria-labelledby="loadingText" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h6 class="modal-title" id="loadingText"></h6>
                    <button type="button" id="progressCancelBtn" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close" style="display:none"></button>
                </div>
                <div id="loaderBody" class="modal-body">
                    <p id="loadingCounter"></p>
                    <div class="progress">
                        <div id="loadingProgressBar" class="progress-bar" role="progressbar" aria-valuenow="0"
                            aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="FormModal" tabindex="-1" aria-labelledby="FormLabel" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h6 class="modal-title" id="FormLabel"></h6>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form name="imgForm">
                        <label for="width-input">Width:</label>
                        <input id="width-input" type="text" class="form-control">
                        <label for="height-input">Height:</label>
                        <input id="height-input" type="text" class="form-control">
                        <label for="layer-input">Layer:</label>
                        <input id="layer-input" type="text" class="form-control">
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Process</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View -->
    <div class="w-100 h-100 d-flex flex-column">
        <div id="workingScene" class="workingScene">
            <div class="left-scene">
                <div id="ct-view" class="scene">
                    <div class="viewer-group row g-0">
                        <div class="group-container">

                            <!--Horizontal-->
                            <div id="horizontalView" class="imgContainer container_lefttop" data-layout-type="image">
                                <div class="viewer-body">
                                    <p class="imgLayerTitle">Horizontal</p>
                                    <div class="viewport port-shadow">
                                    </div>
                                    <div class="imgLayerSlider lftSlider">
                                        <i class="go goTop"></i>
                                        <input class="viewer-slider" type="range" id="horizontalRange" />
                                        <i class="go goBottom"></i>
                                    </div>
                                    <div data-toggle="on" class="imgLayerInfo">
                                        <img src="img/png/f-16/plane_h.png">
                                        <div>
                                            Layer:<label class="counter">0/0</label><br />
                                            Exposure:<label class="exposure">0</label><br />
                                            Contrast:<label class="contrast">0</label><br />
                                        </div>
                                    </div>
                                    <div class="viewer-bar"></div>
                                </div>

                            </div>

                            <!--Volume-->
                            <div id="volumeView" class="imgContainer container_centertop" data-layout-type="volume">
                                <div class="viewer-body">
                                    <p class="imgLayerTitle">Volume</p>
                                    <div class="viewport port-alpha port-full"></div>
                                    <div data-toggle="on" class="imgLayerInfo">
                                        <div class="axis-plane3D"></div>
                                    </div>
                                    <div class="viewer-bar"></div>
                                </div>
                            </div>

                            <!--Coronal-->
                            <div id="coronalView" class="imgContainer container_leftbottom" data-layout-type="image">
                                <div class="viewer-body">
                                    <p class="imgLayerTitle">Coronal</p>
                                    <div class="viewport port-shadow">
                                    </div>
                                    <div class="imgLayerSlider btmSlider">
                                        <i class="go goTop"></i>
                                        <input class="viewer-slider" type="range" id="coronalRange" />
                                        <i class="go goBottom"></i>
                                    </div>
                                    <div data-toggle="on" class="imgLayerInfo">
                                        <img src="img/png/f-16/plane_c.png">
                                        <div>
                                            Layer:<label class="counter">0/0</label><br />
                                            Exposure:<label class="exposure">0</label><br />
                                            Contrast:<label class="contrast">0</label><br />
                                        </div>
                                    </div>
                                    <div class="viewer-bar"></div>
                                </div>
                            </div>

                            <!--Sagittal-->
                            <div id="sagittalView" class="imgContainer container_centerbottom" data-layout-type="image">
                                <div class="viewer-body">
                                    <p class="imgLayerTitle">Saggital</p>
                                    <div class="viewport port-shadow">
                                    </div>
                                    <div class="imgLayerSlider btmSlider dr2l">
                                        <i class="go goTop"></i>
                                        <input class="viewer-slider" type="range" id="sagittalRange" />
                                        <i class="go goBottom"></i>
                                    </div>
                                    <div data-toggle="on" class="imgLayerInfo">
                                        <img src="img/png/f-16/plane_s.png">
                                        <div>
                                            Layer:<label class="counter">0/0</label><br />
                                            Exposure:<label class="exposure">0</label><br />
                                            Contrast:<label class="contrast">0</label><br />
                                        </div>
                                    </div>
                                    <div class="viewer-bar"></div>
                                </div>

                            </div>
                        </div>

                        <div id="idolView" class="imgContainer container_1x2 container_righttop"
                            data-layout-type="idol">
                            <p class="imgLayerTitle">Body</p>
                            <div class="viewer-body">
                                <div class="viewport port-alpha port-full"></div>
                                <div data-toggle="on" class="imgLayerInfo">
                                    <div class="axis-plane3D"></div>
                                </div>
                                <div class="viewer-bar"></div>
                            </div>
                        </div>


                        <!--
                            <div>
                                <div id="cadView" class=" viewer-layout" data-toggle=false data-layout-type="cad">
                                    <div class="viewer-body">
                                        <div class="viewport"></div>
                                        <div data-toggle="on" class="imgLayerInfo"></div>
                                        <p class="imgLayerTitle">Axis</p>
                                    </div>
                                    <div class="viewer-bar"></div>
                                </div>
                            </div>
                            -->
                    </div>

                </div>
                <div class="scene">
                    <div class="viewer-group row g-0">
                        <div id="dcmViewer" style="position: relative;">
                            <div id="directionBox" style="position: absolute;background-color: lightgrey;
                        border-radius: 50%;">
                                <div class="cube">
                                    <span class="top" data-order="TOP"><label>Top</label></span>

                                    <span class="side" style="--i:0" data-order="FRONT"><label>Front</label></span>
                                    <span class="side" style="--i:1" data-order="RIGHT"><label>Right</label></span>
                                    <span class="side" style="--i:2" data-order="BACK"><label>Back</label></span>
                                    <span class="side" style="--i:3" data-order="LEFT"><label>Left</label></span>

                                    <span class="bottom" data-order="BOTTOM"><label>Bottom</label></span>

                                </div>
                                <div class="sphere d-none">
                                    <div class="clip">
                                        <div class="wrapper">
                                            <div class="group">
                                                <span class="sphereFace" style="--i:0"></span>
                                                <span class="sphereFace" style="--i:1"></span>
                                                <span class="sphereFace" style="--i:2"></span>
                                                <span class="sphereFace" style="--i:3"></span>
                                                <span class="sphereFace" style="--i:3"></span>
                                                <span class="sphereFace" style="--i:3"></span>
                                                <span class="sphereFace" style="--i:3"></span>
                                                <span class="sphereFace" style="--i:3"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div id="controlPanelAdjBar" class="adjBar"></div>
            <div class="right-scene">
                <div id="controlPanel" class="controlPanel">


                    <div class="controlPanelContent">
                        <div class="d-flex card_header justify-content-center">
                            <h5>DashBoard</h5>

                        </div>

                        <div class="cardLayout">

                            <form name="segmentsForm" class="d-flex flex-column">
                                <div id="segment_list_n" class="insetBox" style="height:200px">
                                </div>
                            </form>

                            <div class="d-flex segment-control-panel">
                                <Button id="add_segment_btn" class="imgBtn">
                                    <i class="fa-solid fa-square-plus"></i>
                                    <label>create</label>
                                </Button>
                                <Button id="remove_segment_btn" class="imgBtn">
                                    <i class="fa-solid fa-trash-can"></i>
                                    <label>delete</label>
                                </Button>
                                <Button id="previous_step_btn" disabled class="imgBtn">
                                    <i class="fa-solid fa-arrow-rotate-left"></i>
                                    <label>undo</label>
                                </Button>
                                <Button id="next_step_btn" disabled class="imgBtn">
                                    <i class="fa-solid fa-arrow-rotate-right"></i>
                                    <label>redo</label>
                                </Button>
                                <Button id="import_segment_btn" class="imgBtn">
                                    <i class="fa-solid fa-folder-open"></i>
                                    <label>import</label>
                                </Button>
                                <Button id="export_segment_btn" class="imgBtn">
                                    <i class="fa-solid fa-download"></i>
                                    <label>export</label>
                                </Button>
                            </div>

                        </div>
                        <div id="page_selector" class="d-flex titleBtnGroup">

                            <button id="mask_page_btn" class="titleBtn" data-page-name="IMAGE"
                                data-page-index="0">Image</button>
                            <button id="segment_page_btn" class="titleBtn" data-page-name="SEGMENT"
                                data-page-index="0">Segment</button>
                            <button id="tools_page_btn" class="titleBtn" data-page-name="MODEL"
                                data-page-index="1">Model</button>
                            <!--<button id="display_page_btn" class="col-4 btn btn-outline-dark btn-sm" data-page-index="1">Display</button>-->
                            <!--<button id="download_page_btn" class="col-4 btn btn-outline-dark btn-sm">Download</button>-->
                        </div>
                        <div class="cardLayout flex-grow-1 flex-shrink-1">

                            <div id="page_group" class="container pt-2 page-group">

                                <div id="clipping_page" class="d-flex flex-column page">


                                    <div class="accordion">
                                        <button class="groupBtn" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#histogram" aria-expanded="true"
                                            aria-controls="render-mode">
                                            Signal Distribution
                                        </button>
                                        <div id="histogram" class="accordion-collapse collapse show"
                                            aria-labelledby="histogram">
                                            <div class="accordion-body container">
                                                <div class="d-flex" id="image_histogram_viewer"></div>

                                                <hr>

                                                <div class="row align-items-baseline">
                                                    <div class="col-6">Adjustment</div>
                                                    <div class="col-6 d-flex justify-content-center">
                                                        <select id="imgSelector" class="insetBox w-100"></select>
                                                    </div>

                                                    <div class="col-6">Invert</div>
                                                    <div class="col-6 d-flex justify-content-center">
                                                        <input id="imgInvertorCheckBox" type="checkbox">
                                                    </div>

                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                    <div class="accordion">
                                        <button class="groupBtn" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#createMask" aria-expanded="true"
                                            aria-controls="render-mode">
                                            Crop
                                        </button>
                                        <div id="createMask" class="accordion-collapse collapse show"
                                            aria-labelledby="createMask">
                                            <div class="accordion-body container">
                                                <div id="cropTools_selector" class="row">
                                                    <button class="col-4 optionBtn" data-mode="SPHERE">
                                                        <img src="img/svg/sphere.svg">
                                                        Sphere
                                                    </button>
                                                    <button class="col-4 optionBtn" data-mode="BOX">
                                                        <img src="img/svg/box.svg">
                                                        Box
                                                    </button>
                                                    <button class="col-4 optionBtn" data-mode="CYLINDER">
                                                        <img src="img/svg/cylinder.svg">Cylinder</button>
                                                    <button class="col-4 optionBtn d-none" data-mode="ACM">ACM</button>
                                                    <button class="col-4 optionBtn d-none"
                                                        data-mode="Segment">Customize</button>
                                                    <button class="col-4 optionBtn d-none" data-mode="BALLOON">
                                                        <img src="img/svg/balloon.svg">
                                                        Balloon</button>
                                                </div>
                                                <div id="cropTools_group">
                                                    <div class="tool" id="sphererow">
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-4" for="input-maskvalue">radius</div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="sphere_slider_radius" type="range"
                                                                        class="w-100">
                                                                </div>

                                                                <div class="col-4" for="input-maskvalue">center-x</div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="sphere_slider_x" type="range"
                                                                        class="w-100">
                                                                </div>

                                                                <div class="col-4" for="input-maskvalue">center-y</div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="sphere_slider_y" type="range"
                                                                        class="w-100">
                                                                </div>

                                                                <div class="col-4" for="input-maskvalue">center-z</div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="sphere_slider_z" type="range"
                                                                        class="w-100">
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="tool" id="boxrow">
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-4" for="box_slider_t2b">Top-Bottom</div>
                                                                <div class="col-8">
                                                                    <div id="box_slider_t2b" class="w-100  dualslider">
                                                                    </div>
                                                                </div>

                                                                <div class="col-4" for="box_slider_f2b">Front-Back</div>
                                                                <div class="col-8">
                                                                    <div id="box_slider_f2b" class="w-100  dualslider">
                                                                    </div>
                                                                </div>

                                                                <div class="col-4" for="box_slider_l2r">Left-Right</div>
                                                                <div class="col-8">
                                                                    <div id="box_slider_l2r" class="w-100  dualslider">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="tool">
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-4" for="cylinder_slider_t2b">Up-Down
                                                                </div>
                                                                <div class="col-8">
                                                                    <div id="cylinder_slider_t2b"
                                                                        class="w-100 dualslider">
                                                                    </div>
                                                                </div>

                                                                <div class="col-4" for="cylinder_slider_radius">Radius
                                                                </div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="cylinder_slider_radius" type="range"
                                                                        class="w-100">
                                                                </div>

                                                                <div class="col-4" for="cylinder_slider_x">center-x
                                                                </div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="cylinder_slider_x" type="range"
                                                                        class="w-100">
                                                                </div>

                                                                <div class="col-4" for="cylinder_slider_y">center-y
                                                                </div>
                                                                <div class="col-8 d-flex justify-content-center">
                                                                    <input id="cylinder_slider_y" type="range"
                                                                        class="w-100">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="tool">
                                                        <div class="container">
                                                            <div class="row g-0 text-center">
                                                                <label class="col-3" for="input-maskvalue">beta</label>
                                                                <input type="range" class="col-9">
                                                                <label class="col-3" for="input-maskvalue">edge</label>
                                                                <input type="range" class="col-9">
                                                                <label class="col-3" for="input-maskvalue">line</label>
                                                                <input type="range" class="col-9">
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="tool">
                                                        <div class="container">
                                                            <div class="row g-0 text-center">
                                                                <label class="col-3"
                                                                    for="input-maskvalue">Invert</label>
                                                                <input type="checkbox"
                                                                    class="col-9 custom-control-input">
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="tool">
                                                        <div class="container">
                                                            <div class="row g-0 text-center">
                                                                <label class="col-3"
                                                                    for="balloon_slider_size">Size</label>
                                                                <input id="balloon_slider_size" type="range"
                                                                    class="col-9">
                                                                <label class="col-3"
                                                                    for="balloon_slider_x">center-x</label>
                                                                <input id="balloon_slider_x" type="range" class="col-9">
                                                                <label class="col-3"
                                                                    for="balloon_slider_y">center-y</label>
                                                                <input id="balloon_slider_y" type="range" class="col-9">
                                                                <label class="col-3"
                                                                    for="balloon_slider_z">center-z</label>
                                                                <input id="balloon_slider_z" type="range" class="col-9">
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="container">
                                                    <div class="row">
                                                        <div>
                                                            <button id="maskBtn" class="drawerBtn">Apply</button>
                                                        </div>
                                                        <div>
                                                            <button id="resetBtn" class="drawerBtn">Reset</button>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div id="segmentPage" class="d-flex flex-column page">
                                    <div class="accordion">
                                        <button class="groupBtn" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#volume" aria-expanded="true" aria-controls="render-mode">
                                            Volume Rendering
                                        </button>
                                        <div id="volume" class="accordion-collapse collapse show"
                                            aria-labelledby="volume">
                                            <div class="accordion-body container">
                                                <div class="row">
                                                    <div class="col-3 d-flex flex-column" style="font-size: 8px">
                                                        <div>-colormap-</div>
                                                        <button id="alpha_map" class="imgBtn">
                                                            <i class="fa-solid fa-radiation"></i>
                                                            <label>alpha</label>
                                                        </button>
                                                        <button id="color_map" class="imgBtn">
                                                            <i class="fa-solid fa-palette"></i>
                                                            <label>rainbow</label>
                                                        </button>
                                                    </div>
                                                    <div class="col-9" id="colormapView"></div>
                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                    <div class="accordion">
                                        <button class="groupBtn" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#modifier" aria-expanded="true" aria-controls="render-mode">
                                            Segment Editor
                                        </button>
                                        <div id="modifier" class="accordion-collapse collapse show"
                                            aria-labelledby="modifier">
                                            <div class="accordion-body container">
                                                <div class="row" id="tools-group">
                                                    <Button class="optionBtn  active col-4" data-name="none"
                                                        data-mode="NONE">
                                                        <img width="20" title="cursor" src="img/svg/cursor.svg"
                                                            class="ms-0">Pointer
                                                    </Button>
                                                    <Button class="optionBtn col-4" data-name="brush" data-mode="BRUSH">
                                                        <img width="20" title="brush" src="img/svg/pen.svg">Brush
                                                    </Button>
                                                    <Button class="optionBtn col-4" data-name="threshold"
                                                        data-mode="THRESHOLD">
                                                        <img width="20" title="threshold"
                                                            src="img/svg/threshold.svg">Threshold
                                                    </Button>
                                                    <Button class="optionBtn col-4" data-name="region_growing"
                                                        data-mode="REGIONGROW">
                                                        <img width="20" title="region growing"
                                                            src="img/svg/regionGrowing.svg">Growing
                                                    </Button>
                                                    <Button class="optionBtn col-4 d-none" data-name="unet"
                                                        data-mode="NONE">ML</Button>
                                                    <Button class="optionBtn col-4" data-name="logic" data-mode="LOGIC">
                                                        <img width="20" title="logic operation"
                                                            src="img/svg/logic.svg">Combine
                                                    </Button>
                                                    <Button class="optionBtn col-4" data-name="morph" data-mode="MORPH">
                                                        <img width="20" title="blur operation"
                                                            src="img/svg/filter.svg">Smooth
                                                    </Button>
                                                    <Button class="optionBtn col-4 d-none" data-name="scissor"
                                                        data-mode="SCISSOR">
                                                        <img width="20" title="scissor" src="img/svg/filter.svg">Scissor
                                                    </Button>
                                                </div>
                                                <hr>
                                                <div id="segmentPage_controlPanel"
                                                    style="position:relative; height:100%">
                                                    <div class="tool d-flex" name="none"></div>
                                                    <div class="tool d-flex" name="brush">
                                                        <div id="segmentPage_controlPanel_brushMode" class="row g-0">
                                                            <button class="optionBtn col-6 active"
                                                                data-mode="MARK">Mark</button>
                                                            <button class="optionBtn col-6"
                                                                data-mode="ERASER">Eraser</button>
                                                            <button class="optionBtn col-6 d-none" data-mode="3DMARK">3D
                                                                Mark</button>
                                                            <button class="optionBtn col-6 d-none"
                                                                data-mode="3DERASER">3D
                                                                Eraser</button>
                                                        </div>


                                                        <form name="brushSize">
                                                            <label>Brush Size</label>
                                                            <input type="range" min="1" max="50" class="w-100"
                                                                onkeydown="return false;">
                                                        </form>

                                                        <div id="segmentPage_controlPanel_brushView"></div>
                                                    </div>
                                                    <div class="tool d-flex" name="threshold">


                                                        <div id="segmentPage_transfer_method" class="row g-0">
                                                            <button class="optionBtn col-6 active"
                                                                data-mode="1D">1D</button>
                                                            <button class="optionBtn col-6" data-mode="2D">2D</button>
                                                        </div>
                                                        <div id="1D_tf_panel">
                                                            1D transfer function:

                                                            <div class="d-flex">

                                                                <input type="text" class="form-control"
                                                                    style="width: 60px;height: 25px;"
                                                                    id="input-isovalue">
                                                                <div id="dual_slider"
                                                                    class="dualslider dualslider-none">
                                                                    <canvas id="thresholdTile" class="colorTile "
                                                                        width="256" height="1"></canvas>
                                                                </div>


                                                                <input type="text" class="form-control"
                                                                    style="width: 60px;height: 25px;"
                                                                    id="input-distance">
                                                            </div>
                                                            <hr>
                                                            <button id="input-isovalue-auto"
                                                                class="drawerBtn">Auto</button>
                                                            <button id="input-isovalue-apply"
                                                                class="drawerBtn">Apply</button>
                                                        </div>
                                                        <div id="2D_tf_panel">
                                                            2D transfer function:
                                                            <div>
                                                                <select id="second_data_selector"
                                                                    class="w-100"></select>
                                                            </div>
                                                            <div id="transfer_layout" style="margin:20px;height:250px;">
                                                            </div>
                                                            <hr>

                                                            <button id="segment_transfer_reloadBtn"
                                                                class="drawerBtn">Reload</button>
                                                            <button id="segment_transfer_autoBtn"
                                                                class="drawerBtn">Auto</button>
                                                            <button id="segment_transfer_applyBtn"
                                                                class="drawerBtn">Apply</button>
                                                            <div id="mag_layout"
                                                                style="width:100%;height:250px;border:1px black solid;display:none">
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <!--Growing-->
                                                    <div class="tool d-flex" name="region_growing">
                                                        <div id="segmentPage_growing_method" class="row g-0">
                                                            <button class="optionBtn col-6 active"
                                                                data-mode="REGION">Region</button>

                                                            <button class="optionBtn col-6 d-none"
                                                                data-mode="BORDER">Border</button>

                                                            <button class="optionBtn col-6"
                                                                data-mode="REGION2D">Region2D</button>
                                                        </div>
                                                        <hr>
                                                        <div id="growByRegion">
                                                            <form name="regionGrowingMode" class="selectorList">
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label><input name="rg-mode" type="radio"
                                                                                value="NORMAL" checked>
                                                                            Overlay
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        基於原始影像上進行擴張，選取獨立的增長區塊
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label> <input name="rg-mode" type="radio"
                                                                                value="PRESERVE">
                                                                            Preserve
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        在樣板上過濾，保留獨立的增長區域
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label> <input name="rg-mode" type="radio"
                                                                                value="REMOVE">
                                                                            Remove
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        在樣板上過濾，移除獨立的增長區塊
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label> <input name="rg-mode" type="radio"
                                                                                value="EXCLUDE">
                                                                            Exclude
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        基於原始影像上，排除已選擇的區域進行擴張，選取獨立的增長區塊
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label>
                                                                            <input name="rg-mode" type="radio"
                                                                                value="FILL">
                                                                            Fill
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        在樣板上過濾，填充樣板上的空洞
                                                                    </div>
                                                                </div>
                                                            </form>
                                                            <hr>
                                                            <form name="regionGrowingBias"
                                                                class="p-2 d-flex flex-column">
                                                                <label id="segment_controPanel_regionGrowingBias_label"
                                                                    for="segment_controPanel_regionGrowingBias_input">Bias:</label>
                                                                <input id="segment_controPanel_regionGrowingBias_input"
                                                                    type="range">
                                                            </form>

                                                        </div>
                                                        <div id="growByBorder">

                                                        </div>
                                                        <div id="growByRegion2D">
                                                            <form name="regionGrowing2DMode" class="selectorList">

                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label><input name="rg2D-mode" type="radio"
                                                                                value="NORMAL2D" checked>
                                                                            Overlay</label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        基於原始影像上進行擴張，選取獨立的增長區塊
                                                                    </div>

                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label>
                                                                            <input name="rg2D-mode" type="radio"
                                                                                value="PRESERVE2D">
                                                                            Preserve
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        在樣板上過濾，保留獨立的增長區域
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label>
                                                                            <input name="rg2D-mode" type="radio"
                                                                                value="REMOVE2D">
                                                                            Remove
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        在樣板上過濾，移除獨立的增長區塊
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label>
                                                                            <input name="rg2D-mode" type="radio"
                                                                                value="EXCLUDE2D">
                                                                            Exclude
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        基於原始影像上，排除已選擇的區域進行擴張，選取獨立的增長區塊
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <label>
                                                                            <input name="rg2D-mode" type="radio"
                                                                                value="FILL2D">
                                                                            Fill
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        在樣板上過濾，填充樣板上的空洞
                                                                    </div>
                                                                </div>
                                                            </form>

                                                            <hr>
                                                            <form name="regionGrowing2DParameter"
                                                                class="p-2 d-flex flex-column">
                                                                <div class="row">
                                                                    <div class="col-3">
                                                                        <label>Bias:+</label>
                                                                    </div>
                                                                    <div class="col-3">
                                                                        <input type="text" readonly name="biasLabel"
                                                                            class="w-100 labelinput"></label>
                                                                    </div>
                                                                    <div class="col-6">
                                                                        <input name="bias" type="range" class="w-100">
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-6">
                                                                        <label>Apply All</label>
                                                                    </div>
                                                                    <div class="col-6">
                                                                        <input name="applyBtn" type="checkbox">
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>

                                                    <div class="tool d-none" name="unet"></div>
                                                    <div class="tool d-flex" name="logic">
                                                        Source:
                                                        <select id="tool_logic_selector" name="source" class="w-100"
                                                            data-toggle='off'>
                                                            <option value="-1" disabled selected>----------</option>
                                                        </select>
                                                        <hr>
                                                        <form name="logicFunc" class="selectorList">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="intersection"
                                                                        class="drawerBtn leftDrawer">Intersection</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    保留兩個樣板間相同範圍的標記
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="union"
                                                                        class="drawerBtn leftDrawer">Union</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    合併兩個樣板上的標記
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="exclusive"
                                                                        class="drawerBtn leftDrawer">Exclusive</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    標記兩個樣板上的非重疊區域
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="boolean"
                                                                        class="drawerBtn leftDrawer">Boolean</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    將兩個樣板上的標記相減
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="copy"
                                                                        class="drawerBtn leftDrawer">Copy</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    複製樣板上的標記
                                                                </div>
                                                            </div>

                                                        </form>
                                                    </div>

                                                    <!--Blur Tools-->
                                                    <div class="tool d-flex" name="blur">
                                                        <label id="segment_filter_kernelSize_label">Kernel Size</label>
                                                        <input id="segment_filter_kernelSize_input" type="range" min="1"
                                                            max="3" step="1" value="1">
                                                        <hr>
                                                        <form name="filterForm" class="selectorList">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="erode"
                                                                        class="drawerBtn leftDrawer">Erode</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    侵蝕樣板，使標記區塊向內縮減
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="dilate"
                                                                        class="drawerBtn leftDrawer">Dilate</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    擴張樣板，使標記區塊向外延伸
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="medium"
                                                                        class="drawerBtn leftDrawer">Medium</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    平滑化處理，彌平標記邊緣
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="gaussian"
                                                                        class="drawerBtn leftDrawer">Gaussian</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    高斯平滑化處理，彌平標記邊緣
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="close"
                                                                        class="drawerBtn leftDrawer">Close</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    填補標記邊緣/內部缺口
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <button type="button" name="open"
                                                                        class="drawerBtn leftDrawer">Open</button>
                                                                </div>
                                                                <div class="col-8">
                                                                    修補標記邊緣/內部稜角
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>

                                                    <!--Scissor Tools-->
                                                    <div class="tool d-none" name="scissor">
                                                        Cut Mode
                                                        <div class="row g-0">
                                                            <button class="optionBtn grid-2 active">inside</button>
                                                            <button class="optionBtn grid-2">outside</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>



                                </div>
                                <div id="model_page" class="d-flex flex-column page">

                                    <button class="groupBtn" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#model_modelize" aria-expanded="true"
                                        aria-controls="render-mode">
                                        Modelize
                                    </button>
                                    <div id="model_modelize" class="accordion-collapse collapse show"
                                        aria-labelledby="model_modelize">
                                        <div class="accordion-body container">
                                            <div class="row align-items-baseline">
                                                <div class="col-6">
                                                    <label for="showWirLine">WireLine</label>
                                                </div>
                                                <div class="col-6 d-flex justify-content-center">
                                                    <input type="checkbox" id="showWirLine">
                                                </div>
                                                <div class="col-6">
                                                    <label for="showPolygen">Polygen</label>
                                                </div>
                                                <div class="col-6 d-flex justify-content-center">
                                                    <input type="checkbox" id="showPolygen">
                                                </div>

                                                <div>
                                                    <hr>
                                                </div>

                                                <div class="col-6">
                                                    <label for="HzClpFc">C-Clipping</label>
                                                </div>
                                                <div class="col-6 d-flex align-content-center">
                                                    <div class="w-100 dualslider" id="HzClpFc"></div>
                                                </div>

                                                <div class="col-6">
                                                    <label for="CrClpFc">H-Clipping</label>
                                                </div>
                                                <div class="col-6 d-flex align-content-center">
                                                    <div class="w-100 dualslider" id="CrClpFc"></div>
                                                </div>

                                                <div class="col-6">
                                                    <label for="CrClpFc">S-Clipping</label>
                                                </div>
                                                <div class="col-6 d-flex align-content-center">
                                                    <div class="w-100 dualslider" id="SgClpFc"></div>
                                                </div>


                                                <div>
                                                    <hr>
                                                </div>


                                                <div class="col-6">
                                                    <label for="light-intensity-slider">Light</label>
                                                </div>
                                                <div class="col-6 d-flex align-content-center">
                                                    <input type="range" id="light-intensity-slider" class="w-100">
                                                </div>

                                                <div>
                                                    <hr>
                                                </div>

                                                <div class="col-6">
                                                    <label for="model-smooth-slider">Smooth</label>
                                                </div>
                                                <div class="col-6 d-flex align-content-center">
                                                    <input type="range" id="model-smooth-slider" class="w-100">
                                                </div>
                                                <div>
                                                    <button class="drawerBtn" id="generate-model-btn">Generate
                                                        Model</button>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <button class="groupBtn" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#model_download" aria-expanded="true"
                                        aria-controls="render-mode">
                                        Download
                                    </button>
                                    <div id="model_download" class="accordion-collapse collapse show"
                                        aria-labelledby="model_download">
                                        <div class="accordion-body container">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label for="downloadPage_modelType">Format</label>
                                                </div>
                                                <div class="col-6 d-flex align-content-center">
                                                    <select id="downloadPage_modelType" class="w-100"></select>
                                                </div>

                                                <div>
                                                    <hr>
                                                </div>

                                                <div>
                                                    <button class="drawerBtn" id="downloadPage_modelGen">Download
                                                        Model</button>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="display_page" class="accordion d-flex flex-column page ">

                                </div>

                                <div id="downloadPage" class="flex-column page accordion">


                                    <button class="btn btn-collapse btn-sm btn-outline-dark" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#download_segment"
                                        aria-expanded="true" aria-controls="render-mode">
                                        Segment
                                    </button>
                                    <div id="download_segment" class="accordion-collapse collapse show"
                                        aria-labelledby="download_segment">
                                        <div class="accordion-body container">
                                            <div class="row">
                                                <label class="col-6">Format</label>
                                                <select id="downloadPage_segmentType" class="col-6"></select>

                                                <div>
                                                    <hr>
                                                </div>

                                                <button id="downloadPage_singleSegGen"
                                                    class="btn btn-sm btn-outline-dark">Generate single Segment</button>
                                                <button id="downloadPage_multiSegGen"
                                                    class="btn btn-sm btn-outline-dark">Generate All Segments</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="coi-serviceworker.js"></script>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script type="text/javascript" src="js/utilities.js"></script>
    <script type="text/javascript" src="js/gl-matrix-min.js"></script>
    <script type="text/javascript" src="js/shader-srcs.js"></script>
    <script type="text/javascript" src="js/daikon-min.js"></script>
    <script type="module" src="js/jszip.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wallat/compiled-opencvjs/v4.2.0/opencv.js" type="text/javascript"></script>

    <!--tensorflow.js library-->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.4.0/dist/tf.min.js"></script>

    <!--<script type="text/javascript" src="index.bundle.js"></script>-->
    <script type="module" src="jsm/main.js"></script>

</body>

</html>